/* =========================================================
   Premium dark UI • Plus Jakarta Sans
   ========================================================= */
:root{
  --g1:#60a5fa; --g2:#a78bfa; --g3:#34d399;
  --bg:#0b1020; --card:#0f152a; --card-2:#121936; --line:rgba(255,255,255,.08);
  --ink-900:#e5e7eb; --ink-700:#cbd5e1; --ink-500:#93a3b8;
  --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
  --shadow:0 20px 60px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:"Plus Jakarta Sans",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--ink-700); background:var(--bg); overflow-x:hidden;
}

/* Ambient animated background */
body::before{
  content:""; position:fixed; inset:-20%; z-index:-1;
  background:
    radial-gradient(60rem 40rem at 10% 15%, rgba(96,165,250,.25), transparent 60%),
    radial-gradient(60rem 40rem at 90% 10%, rgba(167,139,250,.22), transparent 60%),
    radial-gradient(70rem 50rem at 30% 85%, rgba(52,211,153,.22), transparent 60%),
    linear-gradient(120deg, var(--g1), var(--g2), var(--g3));
  background-size:120% 120%,120% 120%,120% 120%,200% 200%;
  filter:blur(80px) saturate(110%); opacity:.45;
  animation:bg-shift 26s ease-in-out infinite alternate;
}
@keyframes bg-shift{
  0%{background-position:0% 0%,100% 0%,0% 100%,0% 50%}
  50%{background-position:50% 20%,50% 10%,20% 70%,100% 50%}
  100%{background-position:100% 100%,0% 100%,100% 0%,0% 50%}
}

/* Shell */
.page{ min-height:100%; display:grid; place-items:center; padding:28px 16px; }
.shell{
  width:min(980px,94vw);
  background:rgba(18,25,54,.86); backdrop-filter:blur(10px);
  border:1px solid var(--line); border-radius:22px; padding:24px 26px;
  box-shadow:var(--shadow);
}
.para{ margin:0 0 16px; }

/* Top bar */
.nav{ display:flex; align-items:center; justify-content:space-between; margin-bottom:14px; }
.brand{ color:var(--ink-900); font-weight:800; letter-spacing:.2px; }
.tabs{ display:flex; gap:8px; }
.tab{
  border:1px solid var(--line);
  background:linear-gradient(180deg, var(--card), var(--card-2));
  color:var(--ink-700); padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:700;
}
.tab.active{ color:var(--ink-900); border-color:color-mix(in oklab, var(--g2) 35%, var(--line)); }

/* -------- “Top Ribbon” loader on all boxes -------- */
@keyframes ribbon { 0%{background-position:0% 50%} 100%{background-position:200% 50%} }
.row, .subject-card, .hist-card, .modal-card{
  position:relative; overflow:hidden;
  transition:transform .08s ease, box-shadow .18s ease, border-color .18s ease, background .18s ease;
}
.row::before, .subject-card::before, .hist-card::before, .modal-card::before{
  content:""; position:absolute; left:0; top:0; height:4px; width:100%;
  background:linear-gradient(90deg, var(--g1), var(--g2), var(--g3), var(--g1));
  background-size:200% 100%;
  animation:ribbon 6s linear infinite;
  opacity:.95;
}
.row:hover, .subject-card:hover, .hist-card:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 32px rgba(0,0,0,.35);
}

/* Lists & rows */
.list{ display:flex; flex-direction:column; gap:12px; }
.row{
  display:flex; align-items:center; justify-content:space-between;
  width:100%; padding:14px 16px; border-radius:16px;
  border:1px solid var(--line);
  background:linear-gradient(180deg, var(--card), var(--card-2));
  color:var(--ink-900); text-align:left; cursor:pointer;
}
.left{ display:flex; align-items:center; gap:10px; }
.right{ color:#9fb1d1; font-size:1.1rem; }
.right-flex{ display:flex; align-items:center; gap:10px; }
.icon{ width:18px; height:18px; color:#a6b8e0; }

/* Pills & buttons */
.pill{ font-size:.85rem; padding:4px 10px; border-radius:999px; border:1px solid var(--line); background:rgba(255,255,255,.04); color:var(--ink-900); }
.pill.warn{ color:#e9b664; border-color:rgba(245,158,11,.35); background:rgba(249,201,115,.08); }
.pill.ok{ color:#a7f3d0; border-color:rgba(16,185,129,.45); background:rgba(16,185,129,.12); }
.mini{
  padding:6px 10px; border-radius:10px; border:1px solid color-mix(in oklab, var(--g1) 35%, var(--line));
  background:linear-gradient(120deg, rgba(96,165,250,.18), rgba(167,139,250,.18));
  color:var(--ink-900); cursor:pointer; font-weight:700;
}
.mini.tiny{ padding:4px 8px; }
.mini.ghost{ background:transparent; border:1px solid var(--line); color:var(--ink-900); }
.mini.danger{ border-color:rgba(239,68,68,.5); background:linear-gradient(120deg, rgba(239,68,68,.12), rgba(239,68,68,.06)); }

/* Breadcrumbs */
.crumbs{ display:flex; align-items:center; gap:8px; margin-bottom:10px; color:var(--ink-500); }
.crumb{ background:transparent; border:none; color:var(--ink-700); cursor:pointer; padding:0; }
.crumb:hover{ text-decoration:underline; color:var(--ink-900); }
.crumb.active{ color:var(--ink-900); font-weight:800; }
.sep{ color:#8192b1; opacity:.6 }

/* Progress bar + shimmer runner */
.bar{
  height:10px; width:100%; border-radius:999px; overflow:hidden;
  border:1px solid var(--line); background:rgba(255,255,255,.06); margin:8px 0 14px; position:relative;
}
.fill{
  height:100%; width:0%;
  background:linear-gradient(90deg, var(--g1), var(--g2), var(--g3));
  background-size:200% 100%;
  animation:grad 8s linear infinite;
  transition:width .25s ease;
}
@keyframes grad{ from{background-position:0% 50%} to{background-position:100% 50%} }
.runner{
  position:absolute; top:-6px; bottom:-6px; left:-12px; width:18px;
  background:
    radial-gradient(12px 8px at 50% 18%, rgba(255,255,255,.85), rgba(255,255,255,0)),
    linear-gradient(180deg, rgba(255,255,255,.45), rgba(255,255,255,0));
  border-radius:999px; filter:blur(1px); mix-blend-mode:screen; pointer-events:none;
  animation:runner 2.2s ease-in-out infinite;
}
@keyframes runner{
  0%{ transform:translateX(0); opacity:.6 }
  40%{ opacity:1 }
  60%{ opacity:1 }
  100%{ transform:translateX(calc(100% + 12px)); opacity:.6 }
}

.qwrap{ margin-top:6px; }
#qtext{ color:var(--ink-900); margin:0 0 12px; font-weight:800; letter-spacing:.2px; }

/* Optional question image */
.qimg{
  display:block; width:100%; max-height:260px; object-fit:cover;
  border:1px solid var(--line); border-radius:12px; margin:10px 0;
}

/* Options */
.opts{ display:grid; grid-template-columns:1fr; gap:10px; }
.opt{
  padding:12px 14px; border-radius:12px; border:1px solid var(--line);
  color:var(--ink-900);
  background:linear-gradient(180deg, #0f1733, #0f1b3d);
  cursor:pointer; text-align:left;
  transition:transform .06s ease, border-color .12s ease, background .12s ease;
}
.opt:hover{ transform:translateY(-1px); border-color:color-mix(in oklab, var(--g1) 35%, var(--line)); }
.opt:active{ transform:translateY(0) scale(.997); }
.opt.correct{ border-color:rgba(16,185,129,.55); background:linear-gradient(180deg, rgba(16,185,129,.18), rgba(16,185,129,.08)); }
.opt.incorrect{ border-color:rgba(239,68,68,.5); background:linear-gradient(180deg, rgba(239,68,68,.16), rgba(239,68,68,.08)); }

/* Buttons */
.btn{
  margin-top:10px; padding:10px 14px; border-radius:10px;
  border:1px solid color-mix(in oklab, var(--g2) 35%, var(--line));
  background:linear-gradient(120deg, rgba(96,165,250,.18), rgba(167,139,250,.18));
  color:var(--ink-900); font-weight:800; cursor:pointer;
}
.btn:disabled{ opacity:.45; cursor:not-allowed; }
.btn-row{ display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-top:10px; }
.btn.ghost{ background:transparent; border:1px solid var(--line); color:var(--ink-900); }

.done{ text-align:center; margin-top:10px; }
.hidden{ display:none; }

/* Progress page */
.top-actions{ display:flex; justify-content:flex-end; margin-bottom:10px; gap:8px; }
.stats{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; margin-bottom:14px; }
.stat-card{ border:1px solid var(--line); border-radius:16px; padding:14px; background:linear-gradient(180deg, var(--card), var(--card-2)); color:var(--ink-700); }
.stat-k{ color:var(--ink-500); font-weight:700; margin-bottom:6px; }
.stat-v{ color:var(--ink-900); font-weight:800; font-size:1.25rem; }

.subject-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; }
.subject-card{ border:1px solid var(--line); border-radius:16px; padding:14px; background:linear-gradient(180deg, var(--card), var(--card-2)); color:var(--ink-700); }

.sub-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.sub-title{ color:var(--ink-900); font-weight:800; }
.sub-meta{ color:var(--ink-500); }
.meter{ height:10px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid var(--line); overflow:hidden; margin:8px 0; position:relative; }
.meter-fill{ height:100%; background:linear-gradient(90deg, var(--g1), var(--g2), var(--g3)); width:0%; }

.chips{ display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:8px; }
.chip-wrap{ display:flex; align-items:center; gap:6px; }
.chip{ text-align:center; padding:6px 8px; border-radius:10px; border:1px solid var(--line); background:rgba(255,255,255,.04); color:var(--ink-900); cursor:pointer; font-weight:700; }
.chip-ok{ border-color:rgba(16,185,129,.45); background:rgba(16,185,129,.12); }
.chip-warn{ border-color:rgba(245,158,11,.35); background:rgba(249,201,115,.08); }

/* Wrong History */
.history-actions{ display:flex; justify-content:flex-end; margin-bottom:10px; gap:8px; }
.history-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:12px; }
.hist-empty{
  grid-column:1/-1; text-align:center; color:var(--ink-500);
  border:1px solid var(--line); border-radius:16px; padding:16px;
  background:linear-gradient(180deg, var(--card), var(--card-2));
}
.hist-card{ border:1px solid var(--line); border-radius:16px; padding:12px; background:linear-gradient(180deg, var(--card), var(--card-2)); color:var(--ink-700); }
.hist-top{ display:flex; justify-content:space-between; margin-bottom:6px; color:var(--ink-500); font-weight:700; }
.hist-q{ color:var(--ink-900); font-weight:700; margin-bottom:8px; }
.hist-actions{ display:flex; justify-content:flex-end; }

/* Modal (review) */
.modal{ position:fixed; inset:0; background:rgba(1,5,14,.65); display:grid; place-items:center; padding:20px; z-index:50; }
.modal.hidden{ display:none; }
.modal-card{
  width:min(760px,95vw); background:linear-gradient(180deg, var(--card), var(--card-2));
  border:1px solid var(--line); border-radius:18px; padding:16px 18px; color:var(--ink-700); box-shadow:var(--shadow);
}
.modal-head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.review-body{ display:flex; flex-direction:column; gap:10px; }
.review-meta{ color:var(--ink-500); font-weight:700; }
.review-question{ color:var(--ink-900); font-weight:800; }
.review-answers{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

.modal-actions{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-top:12px; }
.modal-actions .center{ display:flex; gap:8px; justify-content:center; flex:1; }

/* Global cursor + focus ring */
.tab, .row, .chip, .mini, .crumb, .opt, .btn { cursor:pointer; }
.row:focus-visible, .tab:focus-visible, .chip:focus-visible, .mini:focus-visible, .opt:focus-visible, .btn:focus-visible, .crumb:focus-visible{
  outline:2px solid color-mix(in oklab, var(--g1) 60%, white);
  outline-offset:2px; border-radius:12px;
}

@media (prefers-reduced-motion: reduce){
  body::before, .fill, .runner{ animation:none }
}
@media (max-width:900px){
  .subject-grid, .history-grid, .stats{ grid-template-columns:1fr; }
}
